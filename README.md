# 챗봇 시나리오 에디터 (Chatbot Scenario Editor)

React와 React Flow 라이브러리를 기반으로 제작된 시각적 챗봇 시나리오 편집 도구입니다. 사용자는 GUI 환경에서 노드를 드래그 앤 드롭하고 연결하여 복잡한 대화 흐름을 손쉽게 설계하고 테스트할 수 있습니다.

---

## ✨ 주요 기능 (Features)

* **시각적 Flow Editor**: 노드를 캔버스에 추가하고 선으로 연결하여 직관적으로 챗봇의 대화 흐름을 구축할 수 있습니다.
* **다양한 노드 타입**: 메시지, 폼, 조건 분기, 슬롯 채우기, API 호출, LLM 연동, 슬롯 설정, 딜레이 등 챗봇 시나리오에 필요한 다양한 기능을 노드 형태로 제공합니다.
* **실시간 시뮬레이터**: 작성한 시나리오가 실제 챗봇 환경에서 어떻게 동작하는지 즉시 테스트하고 디버깅할 수 있습니다.
* **시나리오 관리**: 생성한 시나리오를 목록으로 관리하며, 손쉽게 생성, 수정, 삭제, 복제할 수 있습니다.
* **간단한 게시판**: 서비스 사용자 간의 소통과 공지를 위한 간단한 게시판 기능을 제공합니다.
* **노드 및 시나리오 재사용**: 노드들을 클립보드에 복사/붙여넣기 하거나, 다른 시나리오 전체를 하나의 그룹 노드로 가져와 재사용할 수 있습니다.
* **시작 노드 지정**: 시뮬레이션을 시작할 노드를 시각적으로 지정하고 저장할 수 있습니다.
* **API/Form 템플릿**: 자주 사용하는 API 호출 설정이나 Form 구조를 템플릿으로 저장하고 불러와 재사용할 수 있습니다.

---

## 🖥️ Flow Editor 화면 구성

-   **노드 추가 패널 (좌측)**: 시나리오를 구성하는 다양한 종류의 노드를 캔버스에 추가합니다.
-   **캔버스 (중앙)**: 노드를 배치하고 연결하여 실제 대화 흐름을 구성하는 메인 작업 공간입니다. 우측 하단 미니맵으로 탐색이 용이합니다.
-   **컨트롤러 패널 (우측)**: 캔버스에서 특정 노드를 선택하면 활성화되며, 해당 노드의 세부 내용(텍스트, 버튼, API 정보 등)을 편집할 수 있습니다.
-   **시뮬레이터 (우측)**: 챗봇 아이콘(🤖)을 클릭하여 활성화할 수 있으며, 작성한 시나리오를 실시간으로 테스트할 수 있습니다.
-   **슬롯 표시 창 (좌측 상단)**: 시뮬레이션 중 현재 슬롯들의 값을 표시합니다.

---

## 🧩 노드(Node) 종류 및 기능

| 노드 종류      | 설명                                                                                                                                                                                                    |
| :------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Message** | 챗봇이 사용자에게 보내는 가장 기본적인 텍스트 메시지입니다. 빠른 답장 버튼(Quick Replies)을 추가할 수 있습니다.                                                                                         |
| **Form** | 사용자로부터 이름, 날짜, 체크박스, 드롭다운, 그리드 등 정형화된 데이터 입력을 받기 위한 양식입니다. 선택지/데이터를 슬롯으로 동적 구성 가능하며, 슬롯 바인딩된 그리드 행 선택 시 `selectedRow` 슬롯에 데이터가 저장됩니다. |
| **Condition Branch** | 사용자의 답변(버튼 클릭) 또는 슬롯 값(조건 비교: 값 비교, 슬롯 간 비교, boolean `true`/`false` 비교)에 따라 대화 흐름을 여러 갈래로 나눕니다.                                                                  |
| **SlotFilling**| 사용자 입력(텍스트 또는 버튼 클릭)을 받아 특정 변수(Slot)에 저장하는 데 사용됩니다.                                                                                                                |
| **API** | 외부 API를 호출합니다. 요청 시(URL, 헤더, 본문) 슬롯 값을 사용할 수 있으며, JSON 응답의 일부를 다시 슬롯에 저장할 수 있습니다. 성공/실패 분기 및 다중 API 병렬 요청을 지원합니다.                                  |
| **LLM** | 거대 언어 모델과 연동하여 슬롯 값을 사용한 동적 프롬프트를 기반으로 텍스트를 생성합니다. 생성된 응답 내용의 키워드에 따라 흐름을 분기하고, 전체 응답을 슬롯에 저장할 수 있습니다.                                   |
| **Set Slot** | 하나 이상의 슬롯 값을 고정 값 또는 다른 슬롯 값으로 직접 설정/업데이트합니다. 문자열, 숫자, boolean, JSON 객체/배열 타입을 지원합니다. 흐름 제어나 값 초기화에 사용됩니다.                                    |
| **Delay** | 다음 노드로 진행하기 전 지정된 시간(밀리초) 동안 흐름을 일시 중지합니다. 사용자에게는 아무 메시지도 표시되지 않습니다.                                                                      |
| **Fixed Menu** | 챗봇 대화창 하단에 항상 노출되는 메뉴를 설정합니다. 시나리오의 시작점이 될 수 있습니다.                                                                                                           |
| **Link** | 외부 웹사이트 링크를 사용자에게 전달하며, 새 탭에서 열 수 있습니다.                                                                                                                            |
| **Toast** | 시뮬레이터 화면에 잠시 나타났다가 사라지는 작은 알림 메시지(정보, 성공, 오류 타입)를 표시합니다. 대화 흐름을 방해하지 않습니다.                                                                   |
| **iFrame** | 외부 웹페이지를 챗봇 대화창 내에 직접 삽입(embed)하며, 크기를 조절할 수 있습니다.                                                                                                         |

---

## 🚀 시작하기 (Getting Started)

### 1. 로그인 (Login)

-   서비스를 이용하려면 구글 계정으로 로그인해야 합니다.
-   **허용된 이메일과 도메인**(`cyberlogitec.com`, `wisenut.co.kr`)을 가진 사용자만 접근할 수 있습니다.

### 2. 시나리오 관리 (Scenario Management)

로그인 후 가장 먼저 **시나리오 목록** 화면이 나타납니다.

-   **생성**: `+ 새 시나리오 추가` 버튼을 클릭하고 시나리오 이름과 **Job 타입**(Batch, Process, Long Transaction)을 선택하여 새로운 대화 흐름을 생성합니다.
-   **선택**: 목록에서 시나리오 이름을 클릭하면 해당 시나리오의 편집 화면으로 이동합니다.
-   **수정/복제/삭제**: 각 항목 옆의 아이콘을 통해 이름 또는 Job 타입 변경 (✏️), 시나리오 복제 (📄), 영구 삭제 (🗑️)를 할 수 있습니다.

### 3. 시나리오 편집 (Scenario Editing)

-   **노드 추가 및 편집**: 좌측 패널에서 노드를 클릭하거나 캔버스로 드래그하여 추가하고, 노드를 클릭하여 우측 컨트롤러에서 내용을 수정한 후 `Save Changes` 버튼으로 저장합니다.
-   **시작 노드 설정**: 시뮬레이션을 시작할 노드의 헤더 우측 상단 **재생(▶) 아이콘**을 클릭하여 시작 노드로 지정합니다. 시작 노드는 녹색 테두리로 표시됩니다. 다시 클릭하면 해제됩니다.
-   **노드 연결**: 노드의 가장자리에 있는 연결점(Handle)을 클릭하고 다른 노드의 연결점으로 드래그하여 대화 흐름을 연결합니다.
-   **노드/연결선 삭제**: 노드 우측 상단의 `x` 버튼으로 노드를 삭제하고, 연결선만 선택한 후 `Backspace` 또는 `Delete` 키로 연결선을 삭제합니다.
-   **노드 복제**: 복제하고 싶은 노드를 선택하면 좌측 패널 하단에 나타나는 `+ Duplicate Node` 버튼을 클릭합니다.
-   **노드 및 시나리오 재사용**:
    -   **내보내기/가져오기(Export/Import)**: 캔버스에서 원하는 노드들을 `Shift` 키를 누른 채 클릭하여 선택한 후, `Export Nodes` 버튼으로 클립보드에 복사하고 `Import Nodes` 버튼으로 다른 시나리오에 붙여넣을 수 있습니다.
    -   **시나리오 그룹으로 가져오기**: `+ Scenario Group` 버튼을 클릭하고 다른 시나리오를 선택하면, 해당 시나리오 전체가 하나의 접을 수 있는 그룹 노드로 캔버스에 추가되어 복잡한 흐름을 모듈처럼 재사용할 수 있습니다.

### 4. 저장 및 테스트 (Save and Test)

-   **저장**: 화면 우측 상단의 저장 아이콘(💾)을 클릭하여 현재 작업 중인 시나리오(시작 노드 설정 포함)를 서버에 저장합니다.
-   **테스트**: 챗봇 아이콘(🤖)을 클릭하여 시뮬레이터를 열고, 시뮬레이터 상단의 'Start' 버튼을 클릭하여 설정된 시작 노드부터 시나리오가 의도한 대로 작동하는지 테스트합니다.